<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ phpunit.xml
  ~ Copyright (c) 2018 thegrumpydictator@gmail.com
  ~
  ~ This file is part of Firefly III.
  ~
  ~ Firefly III is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ Firefly III is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with Firefly III. If not, see <http://www.gnu.org/licenses/>.
  -->

<phpunit backupGlobals="false"
         backupStaticAttributes="false"
         bootstrap="vendor/autoload.php"
         colors="true"
         convertErrorsToExceptions="true"
         convertNoticesToExceptions="true"
         convertWarningsToExceptions="true"
         processIsolation="false"
         stopOnFailure="true">
    <listeners>
        <listener class="JohnKary\PHPUnit\Listener\SpeedTrapListener" />
    </listeners>
    <testsuites>
        <!-- test suites -->
        <testsuite name="Api">
            <directory suffix="Test.php">./tests/Api</directory>
        </testsuite>
        <!-- unit tests, splitted: -->
        <testsuite name="Unit">
            <!--
            <directory suffix="Test.php">./tests/Unit/Console</directory>
            <directory suffix="Test.php">./tests/Unit/Factory</directory>
            <directory suffix="Test.php">./tests/Unit/Generator</directory>
            <directory suffix="Test.php">./tests/Unit/Handlers</directory>
            <directory suffix="Test.php">./tests/Unit/Helpers</directory>
            <directory suffix="Test.php">./tests/Unit/Import</directory>
            <directory suffix="Test.php">./tests/Unit/Jobs</directory>
            <directory suffix="Test.php">./tests/Unit/Middleware</directory>
            <directory suffix="Test.php">./tests/Unit/Rules</directory>
            <directory suffix="Test.php">./tests/Unit/Services</directory>
            <directory suffix="Test.php">./tests/Unit/Support</directory>
            <directory suffix="Test.php">./tests/Unit/TransactionRules</directory>
            -->
            <directory suffix="Test.php">./tests/Unit/Transformers</directory>
        </testsuite>
        <testsuite name="Feature">
            <directory suffix="Test.php">./tests/Feature</directory>
        </testsuite>

        <!--

        <testsuite name="Unit">
            <directory suffix="Test.php">./tests/Unit</directory>
        </testsuite>
        -->
    </testsuites>
    <filter>
        <whitelist processUncoveredFilesFromWhitelist="true">
            <directory suffix=".php">./app</directory>
        </whitelist>
    </filter>
    <php>
        <env name="APP_ENV" value="testing"/>
        <env name="CACHE_DRIVER" value="array"/>
        <env name="SESSION_DRIVER" value="array"/>
        <env name="QUEUE_DRIVER" value="sync"/>
    </php>
</phpunit>
